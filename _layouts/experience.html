---
layout: base
---
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  {%- assign sorted_experiences = site.experiences | sort: 'start_date' | reverse -%}
  {%- for experience in sorted_experiences -%}
    {%- if experience.url == page.url -%}
      {%- assign current_index = forloop.index0 -%}
      {%- assign previous_index = current_index | plus: 1 -%}
      {%- assign next_index = current_index | minus: 1 -%}
      {%- if previous_index < sorted_experiences.size -%}
        {%- assign previous_experience = sorted_experiences[previous_index] -%}
      {%- endif -%}
      {%- if next_index >= 0 -%}
        {%- assign next_experience = sorted_experiences[next_index] -%}
      {%- endif -%}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}

  <nav class="experience-navigation-top">
    <div class="experience-nav-wrapper-top">
      {%- if previous_experience -%}
        <a href="{{ previous_experience.url | relative_url }}" class="experience-nav-link-top">← Previous</a>
      {%- else -%}
        <span class="experience-nav-link-top disabled">← Previous</span>
      {%- endif -%}
      <a href="/experiences/" class="experience-nav-link-top experience-nav-link-center">All</a>
      {%- if next_experience -%}
        <a href="{{ next_experience.url | relative_url }}" class="experience-nav-link-top">Next →</a>
      {%- else -%}
        <span class="experience-nav-link-top disabled">Next →</span>
      {%- endif -%}
    </div>
  </nav>

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">{{ page.title | escape }}</h1>
    <div class="post-meta">
      {% include experience-date-range.html experience=page wrapper='time' %}

      {%- if page.bio or page.link -%}
      <p>
        {{ page.bio }}
        {%- if page.link -%}  
          &nbsp;<a href="{{ page.link }}" target="_blank">{{ page.link | remove: "https://" | remove: "http://" | remove: "www." }}</a>
        {%- endif -%}
      </p>
      {%- endif -%}
    </div>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    {% assign experience_path_parts = page.path | split: '/' %}
    {% assign experience_filename = experience_path_parts | last | split: '.' | first %}
    {% assign matched_roles = "" | split: "" %}
    {% for role in site.roles %}
      {% assign role_path_parts = role.path | split: '/' %}
      {% if role_path_parts.size > 2 %}
        {% assign role_directory = role_path_parts[1] %}
        {% if role_directory == experience_filename %}
          {% assign matched_roles = matched_roles | push: role %}
        {% endif %}
      {% endif %}
    {% endfor %}

    {% for role in matched_roles %}
    <h2>{{ role.title }}</h2>

    {{ role.content | markdownify }}
    {% endfor %}

    {{ content }}
  </div>

  {%- assign sorted_experiences = site.experiences | sort: 'start_date' | reverse -%}
  {%- for experience in sorted_experiences -%}
    {%- if experience.url == page.url -%}
      {%- assign current_index = forloop.index0 -%}
      {%- assign previous_index = current_index | plus: 1 -%}
      {%- assign next_index = current_index | minus: 1 -%}
      {%- if previous_index < sorted_experiences.size -%}
        {%- assign previous_experience = sorted_experiences[previous_index] -%}
      {%- endif -%}
      {%- if next_index >= 0 -%}
        {%- assign next_experience = sorted_experiences[next_index] -%}
      {%- endif -%}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}

  <nav class="experience-navigation">
    <div class="experience-nav-wrapper">
      {%- if previous_experience -%}
        <div class="experience-nav-item experience-nav-previous">
          <a href="{{ previous_experience.url | relative_url }}" class="experience-nav-link">
            <span class="experience-nav-label">← Previous</span>
            <span class="experience-nav-title">{{ previous_experience.title | escape }}</span>
          </a>
        </div>
      {%- else -%}
        <div class="experience-nav-item experience-nav-previous"></div>
      {%- endif -%}
      
      {%- if next_experience -%}
        <div class="experience-nav-item experience-nav-next">
          <a href="{{ next_experience.url | relative_url }}" class="experience-nav-link">
            <span class="experience-nav-label">Next →</span>
            <span class="experience-nav-title">{{ next_experience.title | escape }}</span>
          </a>
        </div>
      {%- endif -%}
    </div>
  </nav>

  {% if jekyll.environment == 'production' -%}
    {% if page.comments == false -%}
    <div class="comments-disabled-message">
      Comments have been disabled for this post.
    </div>
    {% else -%}
      {%- include comments.html -%}
    {% endif -%}
  {% endif -%}

  <a class="u-url" href="{{ page.url | relative_url }}" hidden></a>
</article>